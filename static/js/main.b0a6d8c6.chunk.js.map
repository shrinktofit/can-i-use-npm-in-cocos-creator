{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["comparePackageUsage","a","b","weight","usage","module","getModuleId","packageId","subpath","ShowEsmPackageUsage","packageInfo","export","type","as","Array","isArray","exports","map","exportInfo","exported","local","path","ShowCommonJsPackageUsage","App","props","state","database","fetchDatabase","setState","this","className","Helmet","component","match","useRouteMatch","useParams","packages","usages","slice","sort","href","length","ShowPackageInfo","Object","keys","packageName","to","Packages","React","Component","fetch","process","response","json","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b0a6d8c6.chunk.js","sourcesContent":["import React from 'react';\nimport './App.css';\nimport './List.css';\nimport { CanIUseNpmDatabase, CommonJsUsage, EsmUsage, PackageInfo, PackageUsage } from './Database';\nimport { Helmet } from 'react-helmet';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useParams,\n    useRouteMatch\n} from \"react-router-dom\";\n\nclass App extends React.Component<{}, {\n    database: CanIUseNpmDatabase;\n}> {\n    constructor(props: {}) {\n        super(props);\n        this.state = {\n            database: null!,\n        };\n    }\n\n    componentDidMount() {\n        (async () => {\n            const database = await fetchDatabase();\n            this.setState({ database, });\n        })();\n    }\n\n    render() {\n        const { database } = this.state;\n        return database && <div className=\"App\">\n            <Helmet>\n                <title>Can I use ... npm module..</title>\n            </Helmet>\n\n            <Router>\n                <div>\n                    <Switch>\n                        <Route path=\"/\" component={() => Packages(database)}>\n                        </Route>\n                    </Switch>\n                </div>\n            </Router>\n        </div>;\n    }\n}\n\nfunction Packages(database: CanIUseNpmDatabase) {\n    let match = useRouteMatch();\n    if (!database) {\n        return <div></div>;\n    }\n    return <Router>\n        <div>\n            <div>\n                我们收录的：\n            </div>\n            <Switch>\n                <Route path={`${match.path}packages/:packageId`} component={() => ShowPackageInfo(database)}>\n                </Route>\n                <Route path={match.path}>\n                    <nav>\n                        <ul>{\n                            Object.keys(database!.packages).map((packageName) => <li key={packageName}>\n                                <Link to={`${match.path}packages/${packageName}`}>\n                                    {packageName}\n                                </Link>\n                            </li>)\n                        }</ul>\n                    </nav>\n                </Route>\n            </Switch>\n        </div>\n    </Router>\n}\n\nfunction comparePackageUsage (a: PackageUsage, b: PackageUsage) {\n    const weight = (usage: PackageUsage) => usage.module === 'module' ? 0 : 1;\n    return weight(a) - weight(b);\n}\n\nfunction ShowPackageInfo(database: CanIUseNpmDatabase) {\n    const { packageId } = useParams<{ packageId: string }>();\n    const packageInfo = database.packages[packageId];\n    if (!packageInfo) {\n        return <div>我们暂未收录此包的用法。</div>\n    }\n    const usages = Array.isArray(packageInfo.usage) ? packageInfo.usage : [packageInfo.usage];\n    usages.slice().sort(comparePackageUsage);\n    return (<div>\n        <a href={`https://www.npmjs.com/package/${packageId}`}>{`npmjs.com/package/${packageId}`}</a>\n        <ul>\n            <li> 可用：{usages.length > 0 ? '✔️' : '❌'}</li>\n            {\n                usages.map((usage) => <li> {\n                    usage.module === 'module'\n                        ? ShowEsmPackageUsage(packageId, packageInfo, usage)\n                        : ShowCommonJsPackageUsage(packageId, packageInfo, usage)\n                } </li>)\n            }\n        </ul>\n    </div>)\n}\n\nfunction getModuleId (packageId: string, subpath: string) {\n    return subpath === '.' ? packageId : `${packageId}/${subpath}`;\n}\n\nfunction ShowEsmPackageUsage(packageId: string, packageInfo: PackageInfo, usage: EsmUsage) {\n    return (<div>\n        用法：ESM 模块\n        <div>\n        {<code>\n            {`import ${\n                usage.export.type === 'default'\n                    ? usage.export.as\n                    : usage.export.type === 'namespace'\n                        ? `* as ${usage.export.as}`\n                        : (Array.isArray(usage.export.exports)\n                            ? usage.export.exports \n                            : [usage.export.exports]).map((exportInfo) =>\n                                typeof exportInfo === 'string'\n                                    ? exportInfo\n                                    : `${exportInfo.exported} as ${exportInfo.local}`)\n                } from \"${getModuleId(packageId, usage.path)}\"`}\n        </code>}\n        </div>\n    </div>)\n}\n\nfunction ShowCommonJsPackageUsage(packageId: string, packageInfo: PackageInfo, usage: CommonJsUsage) {\n    return (<div>\n        用法：CommonJS 模块\n        <div>\n        {<code>\n            {`import ${usage.as} from \"${getModuleId(packageId, usage.path)}\"`}\n        </code>}\n        </div>\n    </div>)\n}\n\nexport default App;\n\nasync function fetchDatabase() {\n    const response = await fetch(`${process.env.PUBLIC_URL}/database/index.json`);\n    const json = await response.json();\n    return json as CanIUseNpmDatabase;\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}