{"version":3,"sources":["App.tsx","reportWebVitals.ts","index.tsx"],"names":["comparePackageUsage","a","b","weight","usage","module","getModuleId","packageId","subpath","ShowEsmPackageUsage","packageInfo","Array","isArray","export","map","exportInfo","importSpecifier","type","local","bindings","exports","binding","exported","join","printImportSpecifier","path","ShowCommonJsPackageUsage","App","props","state","database","fetchDatabase","setState","this","className","Helmet","component","match","useRouteMatch","useParams","packages","usages","slice","sort","href","length","ShowPackageInfo","Object","keys","packageName","to","Packages","React","Component","fetch","process","response","json","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.aa3669dc.chunk.js","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport './List.css';\r\nimport { CanIUseNpmDatabase, CommonJsUsage, EsmUsage, ImportSpecifier, PackageInfo, PackageUsage } from './Database';\r\nimport { Helmet } from 'react-helmet';\r\nimport {\r\n    BrowserRouter as Router,\r\n    Switch,\r\n    Route,\r\n    Link,\r\n    useParams,\r\n    useRouteMatch\r\n} from \"react-router-dom\";\r\n\r\nclass App extends React.Component<{}, {\r\n    database: CanIUseNpmDatabase;\r\n}> {\r\n    constructor(props: {}) {\r\n        super(props);\r\n        this.state = {\r\n            database: null!,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        (async () => {\r\n            const database = await fetchDatabase();\r\n            this.setState({ database, });\r\n        })();\r\n    }\r\n\r\n    render() {\r\n        const { database } = this.state;\r\n        return database && <div className=\"App\">\r\n            <Helmet>\r\n                <title>Can I use ... npm module..</title>\r\n            </Helmet>\r\n\r\n            <Router>\r\n                <div>\r\n                    <Switch>\r\n                        <Route path=\"/\" component={() => Packages(database)}>\r\n                        </Route>\r\n                    </Switch>\r\n                </div>\r\n            </Router>\r\n        </div>;\r\n    }\r\n}\r\n\r\nfunction Packages(database: CanIUseNpmDatabase) {\r\n    let match = useRouteMatch();\r\n    if (!database) {\r\n        return <div></div>;\r\n    }\r\n    return <Router>\r\n        <div>\r\n            <h1> 我能否在 Cocos Creator 中使用 npm 包…… </h1>\r\n            <Switch>\r\n                <Route path={`${match.path}packages/:packageId`} component={() => ShowPackageInfo(database)}>\r\n                </Route>\r\n                <Route path={match.path}>\r\n                    <nav>\r\n                        <ul>{\r\n                            Object.keys(database!.packages).map((packageName) => <li key={packageName}>\r\n                                <Link to={`${match.path}packages/${packageName}`}>\r\n                                    {packageName}\r\n                                </Link>\r\n                            </li>)\r\n                        }</ul>\r\n                    </nav>\r\n                </Route>\r\n            </Switch>\r\n        </div>\r\n    </Router>\r\n}\r\n\r\nfunction comparePackageUsage (a: PackageUsage, b: PackageUsage) {\r\n    const weight = (usage: PackageUsage) => usage.module === 'module' ? 0 : 1;\r\n    return weight(a) - weight(b);\r\n}\r\n\r\nfunction ShowPackageInfo(database: CanIUseNpmDatabase) {\r\n    const { packageId } = useParams<{ packageId: string }>();\r\n    const packageInfo = database.packages[packageId];\r\n    if (!packageInfo) {\r\n        return <div>我们暂未收录此包的用法。</div>\r\n    }\r\n    const usages = Array.isArray(packageInfo.usage) ? packageInfo.usage : [packageInfo.usage];\r\n    usages.slice().sort(comparePackageUsage);\r\n    return (<div>\r\n        <a href={`https://www.npmjs.com/package/${packageId}`}>{`npmjs.com/package/${packageId}`}</a>\r\n        <ul>\r\n            <li> 可用：{usages.length > 0 ? '✔️' : '❌'}</li>\r\n            {\r\n                usages.map((usage) => <li> {\r\n                    usage.module === 'module'\r\n                        ? ShowEsmPackageUsage(packageId, packageInfo, usage)\r\n                        : ShowCommonJsPackageUsage(packageId, packageInfo, usage)\r\n                } </li>)\r\n            }\r\n        </ul>\r\n    </div>)\r\n}\r\n\r\nfunction getModuleId (packageId: string, subpath: string) {\r\n    return subpath === '.' ? packageId : `${packageId}/${subpath}`;\r\n}\r\n\r\nfunction printImportSpecifier(importSpecifier: ImportSpecifier) {\r\n    switch (importSpecifier.type) {\r\n        case 'default': return `${importSpecifier.local}`;\r\n        case 'namespace': return `* as ${importSpecifier.local}`\r\n        case 'named': {\r\n            const bindings = Array.isArray(importSpecifier.exports) ? importSpecifier.exports : [importSpecifier.exports];\r\n            return `{ ${bindings.map((binding) => typeof binding === 'string'\r\n                ? binding :\r\n                `${binding.exported} as ${binding.local}`).join(', ')} }`;\r\n        }\r\n    }\r\n}\r\n\r\nfunction ShowEsmPackageUsage(packageId: string, packageInfo: PackageInfo, usage: EsmUsage) {\r\n    return (<div>\r\n        用法：ESM 模块\r\n        <div>\r\n        {<pre>\r\n            {(Array.isArray(usage.export) ? usage.export : [usage.export]).map((exportInfo) => {\r\n                return `import ${printImportSpecifier(exportInfo)} from \"${getModuleId(packageId, usage.path)}\";`;\r\n            }).join(`\\n或\\n`)}\r\n        </pre>}\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nfunction ShowCommonJsPackageUsage(packageId: string, packageInfo: PackageInfo, usage: CommonJsUsage) {\r\n    return (<div>\r\n        用法：CommonJS 模块\r\n        <div>\r\n        {<pre>\r\n            {`import ${usage.local} from \"${getModuleId(packageId, usage.path)}\";`}\r\n        </pre>}\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nexport default App;\r\n\r\nasync function fetchDatabase() {\r\n    const response = await fetch(`${process.env.PUBLIC_URL}/database/index.json`);\r\n    const json = await response.json();\r\n    return json as CanIUseNpmDatabase;\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}